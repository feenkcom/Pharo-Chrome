private - model creation
setMethodSource
	| refClassName |

	^ String streamContents: [ :stream |
		stream
			<< name; 
			<< ': anObject'; cr;
			<< self methodComment; cr;
			tab; << '<autoGeneratedMethod>'; cr;
			cr.
		(self referenceClassFor: self ref) ifNotNil:
			[ :referenceClass |
			stream
				tab; << name;
					<< ' := anObject isDictionary ifTrue:'; cr;
				tab; tab; << '[ ';
					<< referenceClass;
					<< ' fromDictionary: anObject client: client ]'; cr;
				tab; << 'ifFalse:'; cr;
				tab; tab; << '[ anObject ]'; cr ]
		ifNil: [ 	self items ifNotNil:
			[ self items size = 1 ifTrue:
				[ self items at: #'$ref' ifPresent: [ :itemRef |
					refClassName := self referenceClassFor: itemRef ] ].
			refClassName ifNotNil:
				[ stream
					tab; << name;
						<< ' := anObject collect: [ :each |'; cr;
					tab; tab; << 'each isDictionary ifTrue:'; cr;
					tab; tab; tab; << '[ ';
						<< refClassName;
						<< ' fromDictionary: each client: client ]'; cr;
					tab; tab; << 'ifFalse:'; cr;
					tab; tab; tab; << '[ each ] ]'; cr ]
			ifNil:
				[ stream
					tab; << name;
						<< ' := anObject'; cr ] ]
		ifNil:
			[ stream
				tab; << name;
					<< ' := anObject'; cr ] ] ]
